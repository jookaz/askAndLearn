"use strict";(self["webpackChunkteacher_ai"]=self["webpackChunkteacher_ai"]||[]).push([[195],{7195:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});l(8111),l(1701);var t=l(6768),o=l(144),u=l(1219),n=l(2933),r=l(5720);const d=e=>r.A.get("/teacher/model",{params:e}),i=e=>r.A.delete("/teacher/model",{params:{ids:e},paramsSerializer:{indexes:null}}),s=e=>r.A.post("/teacher/model",e),c=e=>r.A.put("/teacher/model",e),m=e=>r.A.get(`/teacher/model/${e}`),p={class:"model-manage"},v={class:"toolbar"};var b={__name:"ModelManageView",setup(e){const a=(0,o.KR)(1),l=(0,o.KR)(10),r=(0,o.KR)(0),b=(0,o.KR)([]),g=(0,o.KR)(!1),k=(0,o.KR)(!1),f=(0,o.KR)({id:null,modelName:"",baseUrl:"",apiKey:""}),y=(0,o.KR)([]),h=async()=>{g.value=!0;try{const e=await d({pageNo:a.value,pageSize:l.value});b.value=e.data.data.records,r.value=e.data.data.total}catch(e){u.nk.error("数据加载失败")}finally{g.value=!1}};(0,t.wB)([a,l],h),h();const w=e=>{y.value=e.map((e=>e.id))},F=async e=>{try{await n.s.confirm("确定删除该模型？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await i([e]),u.nk.success("删除成功"),h()}catch(a){"cancel"!==a&&u.nk.error("删除失败："+a.message)}},_=async()=>{if(0!==y.value.length)try{await n.s.confirm(`确认删除选中的${y.value.length}个模型？`,"批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await i(y.value),u.nk.success("批量删除成功"),h()}catch(e){"cancel"!==e&&u.nk.error("删除失败："+e.message)}else u.nk.warning("请选择要删除的模型")},K=()=>{f.value={id:null,modelName:"",baseUrl:"",apiKey:""},k.value=!0},V=async e=>{try{const a=await m(e.id);f.value={...a.data.data},k.value=!0}catch(a){u.nk.error("获取模型详情失败")}},C=async()=>{try{let e;if(e=f.value.id?await c(f.value):await s(f.value),1!==e.data.code)throw new Error(e.data.msg||"操作失败");u.nk.success(f.value.id?"更新成功":"创建成功"),k.value=!1,h()}catch(e){const a=e.response?.data?.msg||e.message;u.nk.error(`操作失败：${a}`),a.includes("已存在")&&(f.value.modelName="")}};return(e,o)=>{const u=(0,t.g2)("el-button"),n=(0,t.g2)("el-table-column"),d=(0,t.g2)("el-table"),i=(0,t.g2)("el-pagination"),s=(0,t.g2)("el-input"),c=(0,t.g2)("el-form-item"),m=(0,t.g2)("el-form"),y=(0,t.g2)("el-dialog"),h=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("div",v,[(0,t.bF)(u,{type:"primary",onClick:K},{default:(0,t.k6)((()=>o[7]||(o[7]=[(0,t.eW)("新建模型")]))),_:1}),(0,t.bF)(u,{type:"danger",onClick:_},{default:(0,t.k6)((()=>o[8]||(o[8]=[(0,t.eW)("批量删除")]))),_:1})]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{data:b.value,border:"",stripe:"",onSelectionChange:w},{default:(0,t.k6)((()=>[(0,t.bF)(n,{type:"selection",width:"55"}),(0,t.bF)(n,{prop:"modelName",label:"模型名称"}),(0,t.bF)(n,{prop:"baseUrl",label:"API地址"}),(0,t.bF)(n,{label:"操作",width:"200"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(u,{size:"small",onClick:a=>V(e)},{default:(0,t.k6)((()=>o[9]||(o[9]=[(0,t.eW)("编辑")]))),_:2},1032,["onClick"]),(0,t.bF)(u,{size:"small",type:"danger",onClick:a=>F(e.id)},{default:(0,t.k6)((()=>o[10]||(o[10]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[h,g.value]]),(0,t.bF)(i,{"current-page":a.value,"onUpdate:currentPage":o[0]||(o[0]=e=>a.value=e),"page-size":l.value,"onUpdate:pageSize":o[1]||(o[1]=e=>l.value=e),total:r.value,layout:"total, sizes, prev, pager, next","page-sizes":[10,20,30],background:""},null,8,["current-page","page-size","total"]),(0,t.bF)(y,{modelValue:k.value,"onUpdate:modelValue":o[6]||(o[6]=e=>k.value=e),title:"模型配置"},{footer:(0,t.k6)((()=>[(0,t.bF)(u,{onClick:o[5]||(o[5]=e=>k.value=!1)},{default:(0,t.k6)((()=>o[11]||(o[11]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(u,{type:"primary",onClick:C},{default:(0,t.k6)((()=>o[12]||(o[12]=[(0,t.eW)("确认")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(m,{model:f.value,"label-width":"120px"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"模型名称",prop:"modelName"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:f.value.modelName,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value.modelName=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"API地址",prop:"baseUrl"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:f.value.baseUrl,"onUpdate:modelValue":o[3]||(o[3]=e=>f.value.baseUrl=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(c,{label:"API密钥",prop:"apiKey"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:f.value.apiKey,"onUpdate:modelValue":o[4]||(o[4]=e=>f.value.apiKey=e),"show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}};const g=b;var k=g}}]);
//# sourceMappingURL=195.578781dc.js.map