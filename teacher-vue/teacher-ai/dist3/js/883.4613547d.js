"use strict";(self["webpackChunkteacher_ai"]=self["webpackChunkteacher_ai"]||[]).push([[883],{2883:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});t(8111),t(1701);var l=t(6768),n=t(4232),i=t(144),o=t(2933),r=t(1219),s=t(3339);const d={class:"model-manage-container"},u={class:"operation-bar"};var c={__name:"SystemModelManageView",setup(e){const a=async e=>{try{await o.s.confirm(`确认${1===e.systemFlag?"取消":"设置"}该系统模型？`,"操作确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const{data:a}=await(0,s.Vj)(e.id);1===a.code&&(r.nk.success("操作成功"),f())}catch(a){"cancel"!==a&&r.nk.error(a.response?.data?.message||"操作失败")}},t=(0,i.Kh)({page:1,size:10,total:0}),c=(0,i.KR)([]),m=(0,i.KR)(!1),p=(0,i.KR)([]),g=(0,i.Kh)({visible:!1,title:"新建模型",isEdit:!1}),b=(0,i.Kh)({id:null,modelName:"",baseUrl:"",apiKey:""}),f=async()=>{m.value=!0;try{const{data:e}=await(0,s.j2)({pageNo:t.page,pageSize:t.size});1===e.code&&(c.value=e.data.records,t.total=e.data.total)}catch(e){r.nk.error(e.response?.data?.message||"数据加载失败")}finally{m.value=!1}},k=e=>{p.value=e.map((e=>e.id))},y=async e=>{try{await o.s.confirm("确定删除该模型？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await(0,s.GM)([e]),r.nk.success("删除成功"),f()}catch(a){"cancel"!==a&&r.nk.error("删除失败："+a.message)}},h=async()=>{if(0!==p.value.length)try{await o.s.confirm(`确认删除选中的${p.value.length}个模型？`,"批量删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await(0,s.GM)(p.value),r.nk.success("批量删除成功"),f()}catch(e){"cancel"!==e&&r.nk.error("删除失败："+e.message)}else r.nk.warning("请选择要删除的模型")},w=()=>{Object.assign(b,{id:null,modelName:"",baseUrl:"",apiKey:""}),g.title="新建模型",g.isEdit=!1,g.visible=!0},v=async e=>{try{const{data:a}=await(0,s.r9)(e.id);1===a.code&&(Object.assign(b,a.data),g.title="编辑模型",g.isEdit=!0,g.visible=!0)}catch(a){r.nk.error(a.response?.data?.message||"获取详情失败")}},F=async()=>{try{let e;e=g.isEdit?await(0,s.xI)(b):await(0,s.kQ)(b),1===e.data.code&&(r.nk.success(g.isEdit?"更新成功":"创建成功"),g.visible=!1,f())}catch(e){r.nk.error(e.response?.data?.message||"操作失败")}};return(0,l.sV)(f),(e,i)=>{const o=(0,l.g2)("el-button"),r=(0,l.g2)("el-table-column"),s=(0,l.g2)("el-table"),p=(0,l.g2)("el-pagination"),f=(0,l.g2)("el-input"),_=(0,l.g2)("el-form-item"),V=(0,l.g2)("el-form"),z=(0,l.g2)("el-dialog"),A=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",u,[(0,l.bF)(o,{type:"primary",onClick:w},{default:(0,l.k6)((()=>i[7]||(i[7]=[(0,l.eW)("新建模型")]))),_:1}),(0,l.bF)(o,{type:"danger",onClick:h},{default:(0,l.k6)((()=>i[8]||(i[8]=[(0,l.eW)("批量删除")]))),_:1})]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(s,{data:c.value,border:"","highlight-current-row":"",onSelectionChange:k},{default:(0,l.k6)((()=>[(0,l.bF)(r,{type:"selection",width:"55"}),(0,l.bF)(r,{prop:"modelName",label:"模型名称","min-width":"120"}),(0,l.bF)(r,{prop:"baseUrl",label:"API地址","min-width":"200"}),(0,l.bF)(r,{label:"系统模型",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,n.v_)(1===e.systemFlag?"是":"否"),1)])),_:1}),(0,l.bF)(r,{label:"操作",width:"250"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(o,{size:"small",onClick:a=>v(e)},{default:(0,l.k6)((()=>i[9]||(i[9]=[(0,l.eW)("编辑")]))),_:2},1032,["onClick"]),(0,l.bF)(o,{size:"small",type:"danger",onClick:a=>y(e.id)},{default:(0,l.k6)((()=>i[10]||(i[10]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"]),(0,l.bF)(o,{size:"small",type:1===e.systemFlag?"warning":"success",onClick:t=>a(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(1===e.systemFlag?"系统模型":"设为系统模型"),1)])),_:2},1032,["type","onClick"])])),_:1})])),_:1},8,["data"])),[[A,m.value]]),(0,l.bF)(p,{"current-page":t.page,"onUpdate:currentPage":i[0]||(i[0]=e=>t.page=e),"page-size":t.size,"onUpdate:pageSize":i[1]||(i[1]=e=>t.size=e),total:t.total,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next",class:"pagination-wrapper"},null,8,["current-page","page-size","total"]),(0,l.bF)(z,{modelValue:g.visible,"onUpdate:modelValue":i[6]||(i[6]=e=>g.visible=e),title:g.title},{footer:(0,l.k6)((()=>[(0,l.bF)(o,{onClick:i[5]||(i[5]=e=>g.visible=!1)},{default:(0,l.k6)((()=>i[11]||(i[11]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(o,{type:"primary",onClick:F},{default:(0,l.k6)((()=>i[12]||(i[12]=[(0,l.eW)("确认")]))),_:1})])),default:(0,l.k6)((()=>[(0,l.bF)(V,{model:b,"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{label:"模型名称",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:b.modelName,"onUpdate:modelValue":i[2]||(i[2]=e=>b.modelName=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(_,{label:"API地址",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:b.baseUrl,"onUpdate:modelValue":i[3]||(i[3]=e=>b.baseUrl=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(_,{label:"API密钥"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:b.apiKey,"onUpdate:modelValue":i[4]||(i[4]=e=>b.apiKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}},m=t(1241);const p=(0,m.A)(c,[["__scopeId","data-v-cfaf4476"]]);var g=p},3339:function(e,a,t){t.d(a,{GM:function(){return i},OJ:function(){return u},PV:function(){return p},Vj:function(){return d},Wz:function(){return c},j2:function(){return n},kQ:function(){return o},mK:function(){return g},qj:function(){return m},r9:function(){return s},xI:function(){return r}});var l=t(5720);const n=e=>(0,l.A)({url:"/admin/model",method:"get",params:e}),i=e=>l.A.delete("/admin/model",{params:{ids:e},paramsSerializer:{indexes:null}}),o=e=>(0,l.A)({url:"/admin/model",method:"post",data:e}),r=e=>(0,l.A)({url:"/admin/model",method:"put",data:e}),s=e=>(0,l.A)({url:`/admin/model/${e}`,method:"get"}),d=e=>(0,l.A)({url:"/admin/model/setSystemModel",method:"put",params:{modelId:e}}),u=e=>l.A.get("/admin/prompt-template/page",{params:e}),c=e=>l.A.post("/admin/prompt-template",e),m=e=>l.A.put("/admin/prompt-template",e),p=e=>l.A.delete("/admin/prompt-template",{params:{ids:e},paramsSerializer:{indexes:null}}),g=e=>l.A.get(`/admin/prompt-template/${e}`)}}]);
//# sourceMappingURL=883.4613547d.js.map