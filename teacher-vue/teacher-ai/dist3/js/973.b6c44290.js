"use strict";(self["webpackChunkteacher_ai"]=self["webpackChunkteacher_ai"]||[]).push([[973],{6526:function(t,e,n){n.d(e,{BH:function(){return v},Fk:function(){return l},MT:function(){return f},N2:function(){return p},Ne:function(){return c},Pn:function(){return d},T$:function(){return o},W1:function(){return k},XJ:function(){return s},cL:function(){return a},h2:function(){return r},jC:function(){return m},r:function(){return i},t8:function(){return A},vo:function(){return h}});var u=n(5720);const a=t=>(0,u.A)({url:`/student/youAsk/models/${t}`,method:"get"}),s=(t,e,n,a,s,r)=>(0,u.A)({url:"/student/youAsk/chat/multi",method:"post",data:{modelNames:t,question:e,userId:n,courseId:a,chapterId:s,questionId:r},timeout:6e4}),r=(t,e)=>(0,u.A)({url:"/student/youAsk/chat",method:"post",data:t,...e}),o=t=>(0,u.A)({url:"/student/youAsk/chat/answer",method:"post",timeout:6e4,data:t}),l=(t,e)=>(0,u.A)({url:"/student/modelsAnswer/score",method:"put",data:{id:t,studentScore:e}}),d=()=>(0,u.A)({url:"/ai/history",method:"get"}),i=t=>(0,u.A)({url:`/ai/history/${t}`,method:"get"}),c=t=>(0,u.A)({url:"/student/question/listAll",method:"get",params:t});function m(t,e){return(0,u.A)({url:"/student/question/updateLike",method:"put",params:{questionId:t,isLike:e}})}function p(t){return(0,u.A)({url:"/student/question/allAnswer",method:"get",params:{questionId:t}})}const k=(t,e)=>(0,u.A)({url:"student/studentAnswer/updateLike",method:"put",params:{answerId:t,isLike:e}}),f=(t,e)=>(0,u.A)({url:"student/studentImproveAnswer/updateLike",method:"put",params:{improveAnswerId:t,isLike:e}}),h=(t,e)=>(0,u.A)({url:"student/studentAnswerAll/updateLike",method:"put",params:{studentAnswerAllId:t,isLike:e}}),A=t=>(0,u.A)({url:"student/studentAnswerAll/create",method:"post",data:t}),v=t=>(0,u.A)({url:"/student/modelsAnswer/reason",method:"put",data:t})},9973:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});n(8111),n(1701);var u=n(6768),a=n(4232),s=n(144),r=n(1219),o=n(6526);const l={class:"qa-container"},d={class:"message-header"},i={class:"timestamp"},c={class:"message-content"};var m={__name:"QASelfView",setup(t){const e=(0,s.KR)([]),n=(0,s.KR)([]),m=(0,s.KR)(null),p=(0,s.KR)(!1),k=async()=>{try{p.value=!0;const t=await(0,o.Pn)();e.value=t.data||[]}catch(t){r.nk.error("获取会话列表失败: "+t.message)}finally{p.value=!1}},f=async t=>{try{m.value=t;const e=await(0,o.r)(t);n.value=(e.data||[]).map((t=>({role:t.role,content:t.content,timestamp:(new Date).toISOString()})))}catch(e){r.nk.error("获取聊天记录失败: "+e.message)}},h=t=>new Date(t).toLocaleString();return(t,s)=>{const r=(0,u.g2)("Refresh"),o=(0,u.g2)("el-icon"),A=(0,u.g2)("el-button"),v=(0,u.g2)("el-card"),g=(0,u.g2)("el-tag");return(0,u.uX)(),(0,u.CE)("div",l,[(0,u.bF)(v,{class:"operation-card"},{default:(0,u.k6)((()=>[(0,u.bF)(A,{type:"primary",onClick:k,loading:p.value},{default:(0,u.k6)((()=>[(0,u.bF)(o,null,{default:(0,u.k6)((()=>[(0,u.bF)(r)])),_:1}),s[0]||(s[0]=(0,u.eW)(" 获取会话历史 "))])),_:1},8,["loading"])])),_:1}),e.value.length>0?((0,u.uX)(),(0,u.Wv)(v,{key:0,class:"chat-list"},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.value,(t=>((0,u.uX)(),(0,u.CE)("div",{class:"chat-item",key:t},[(0,u.bF)(A,{type:"text",onClick:e=>f(t)},{default:(0,u.k6)((()=>[(0,u.eW)((0,a.v_)(t),1)])),_:2},1032,["onClick"])])))),128))])),_:1})):(0,u.Q3)("",!0),m.value?((0,u.uX)(),(0,u.Wv)(v,{key:1,class:"history-card"},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(n.value,((t,e)=>((0,u.uX)(),(0,u.CE)("div",{class:"message-item",key:e},[(0,u.Lk)("div",d,[(0,u.bF)(g,{type:"info",size:"small"},{default:(0,u.k6)((()=>[(0,u.eW)((0,a.v_)(t.role),1)])),_:2},1024),(0,u.Lk)("span",i,(0,a.v_)(h(t.timestamp)),1)]),(0,u.Lk)("div",c,(0,a.v_)(t.content),1)])))),128))])),_:1})):(0,u.Q3)("",!0)])}}},p=n(1241);const k=(0,p.A)(m,[["__scopeId","data-v-2e69941f"]]);var f=k}}]);
//# sourceMappingURL=973.b6c44290.js.map