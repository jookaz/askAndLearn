"use strict";(self["webpackChunkteacher_ai"]=self["webpackChunkteacher_ai"]||[]).push([[505],{3339:function(e,t,a){a.d(t,{GM:function(){return n},OJ:function(){return u},PV:function(){return s},Vj:function(){return m},Wz:function(){return i},j2:function(){return o},kQ:function(){return r},mK:function(){return b},qj:function(){return c},r9:function(){return p},xI:function(){return d}});var l=a(5720);const o=e=>(0,l.A)({url:"/admin/model",method:"get",params:e}),n=e=>l.A.delete("/admin/model",{params:{ids:e},paramsSerializer:{indexes:null}}),r=e=>(0,l.A)({url:"/admin/model",method:"post",data:e}),d=e=>(0,l.A)({url:"/admin/model",method:"put",data:e}),p=e=>(0,l.A)({url:`/admin/model/${e}`,method:"get"}),m=e=>(0,l.A)({url:"/admin/model/setSystemModel",method:"put",params:{modelId:e}}),u=e=>l.A.get("/admin/prompt-template/page",{params:e}),i=e=>l.A.post("/admin/prompt-template",e),c=e=>l.A.put("/admin/prompt-template",e),s=e=>l.A.delete("/admin/prompt-template",{params:{ids:e},paramsSerializer:{indexes:null}}),b=e=>l.A.get(`/admin/prompt-template/${e}`)},8505:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var l=a(6768),o=a(4232),n=a(144),r=a(3339),d=a(1219),p=a(2933);const m={class:"mb-4"};var u={__name:"PromptManageView",setup(e){const t=(0,n.KR)(1),a=(0,n.KR)(10),u=(0,n.KR)(!1),i=(0,n.Kh)({list:[],total:0}),c=(0,n.KR)(!1),s=(0,n.Kh)({promptName:"",promptContent:""}),b=(0,n.KR)(!1),f=(0,n.KR)(!1),g=(0,n.Kh)({id:null,promptName:"",promptContent:""}),k=(e,t)=>e?e.length>t?e.slice(0,t)+"...":e:"",v=async()=>{try{u.value=!0;const e=await(0,r.OJ)({pageNum:t.value,pageSize:a.value});console.log("Fetched data:",e.data),1===e.data.code&&(console.log("Fetched data111:",e.data),i.list=e.data.data.records,i.total=e.data.data.total)}catch(e){d.nk.error("数据加载失败")}finally{u.value=!1}},h=e=>{s.promptName=e.promptName,s.promptContent=e.promptContent,c.value=!0},C=async e=>{try{await p.s.confirm(`确认删除选中的${e.length}条记录？`);const a=await(0,r.PV)(e);1===a.data.code&&(d.nk.success("删除成功"),t.value=1,v())}catch(a){}};v();const _=()=>{g.value={id:null,promptName:"",promptContent:""},f.value=!1,b.value=!0},y=async e=>{try{const t=await(0,r.mK)(e.id);1===t.data.code&&(Object.assign(g,{id:e.id,promptName:t.data.data.promptName,promptContent:t.data.data.promptContent}),f.value=!0,b.value=!0)}catch(t){d.nk.error("获取详情失败")}},F=async()=>{try{const e={promptName:g.promptName,promptContent:g.promptContent};let t;t=f.value?await(0,r.qj)({...e,id:g.id}):await(0,r.Wz)(e),1===t.data.code&&(d.nk.success(f.value?"更新成功":"新增成功"),b.value=!1,v(),Object.assign(g,{id:null,promptName:"",promptContent:""}))}catch(e){d.nk.error("操作失败："+(e.message||"未知错误"))}};return(e,n)=>{const r=(0,l.g2)("el-button"),d=(0,l.g2)("el-table-column"),p=(0,l.g2)("el-link"),w=(0,l.g2)("el-table"),V=(0,l.g2)("el-pagination"),N=(0,l.g2)("el-input"),A=(0,l.g2)("el-dialog"),z=(0,l.g2)("el-form-item"),K=(0,l.g2)("el-form"),W=(0,l.g2)("el-card"),x=(0,l.gN)("loading");return(0,l.uX)(),(0,l.Wv)(W,{class:"box-card"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",m,[(0,l.bF)(r,{type:"primary",onClick:_},{default:(0,l.k6)((()=>n[8]||(n[8]=[(0,l.eW)("新增提示词")]))),_:1})]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(w,{data:i.list,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"id",label:"ID",width:"80"}),(0,l.bF)(d,{prop:"promptName",label:"名称"}),(0,l.bF)(d,{label:"内容预览",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{type:"primary",onClick:t=>h(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(k(e.promptContent,100)),1)])),_:2},1032,["onClick"])])),_:1}),(0,l.bF)(d,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(r,{size:"small",onClick:t=>y(e)},{default:(0,l.k6)((()=>n[9]||(n[9]=[(0,l.eW)("编辑")]))),_:2},1032,["onClick"]),(0,l.bF)(r,{size:"small",type:"danger",onClick:t=>C([e.id])},{default:(0,l.k6)((()=>n[10]||(n[10]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[x,u.value]]),(0,l.bF)(V,{class:"mt-4","current-page":t.value,"onUpdate:currentPage":n[0]||(n[0]=e=>t.value=e),"page-size":a.value,"onUpdate:pageSize":n[1]||(n[1]=e=>a.value=e),total:i.total,onCurrentChange:v},null,8,["current-page","page-size","total"]),(0,l.bF)(A,{modelValue:c.value,"onUpdate:modelValue":n[3]||(n[3]=e=>c.value=e),title:s.promptName,width:"60%"},{default:(0,l.k6)((()=>[(0,l.bF)(N,{modelValue:s.promptContent,"onUpdate:modelValue":n[2]||(n[2]=e=>s.promptContent=e),type:"textarea",autosize:{minRows:10,maxRows:20},readonly:"",class:"detail-textarea"},null,8,["modelValue"])])),_:1},8,["modelValue","title"]),(0,l.bF)(A,{modelValue:b.value,"onUpdate:modelValue":n[7]||(n[7]=e=>b.value=e),title:f.value?"编辑提示词":"新增提示词"},{footer:(0,l.k6)((()=>[(0,l.bF)(r,{onClick:n[6]||(n[6]=e=>b.value=!1)},{default:(0,l.k6)((()=>n[11]||(n[11]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(r,{type:"primary",onClick:F},{default:(0,l.k6)((()=>n[12]||(n[12]=[(0,l.eW)("确认")]))),_:1})])),default:(0,l.k6)((()=>[(0,l.bF)(K,{model:g,"label-width":"80px"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{label:"名称",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(N,{modelValue:g.promptName,"onUpdate:modelValue":n[4]||(n[4]=e=>g.promptName=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"内容",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(N,{modelValue:g.promptContent,"onUpdate:modelValue":n[5]||(n[5]=e=>g.promptContent=e),type:"textarea",rows:8},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])),_:1})}}},i=a(1241);const c=(0,i.A)(u,[["__scopeId","data-v-3b78b2b5"]]);var s=c}}]);
//# sourceMappingURL=505.4718b59e.js.map