"use strict";(self["webpackChunkteacher_ai"]=self["webpackChunkteacher_ai"]||[]).push([[865],{1865:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});t(4114);var l=t(6768),s=t(4232),n=t(5130),u=t(144),r=t(1387),o=t(5720),d=t(1219),c=t(2933),i=t(6377),m=t(782);const p={class:"question-detail"},b={class:"markdown-container"},k={class:"message student"},v={class:"bubble"},g={class:"message answer"},h={class:"bubble"},f={class:"chat-container"},y={class:"chat-messages"},_={class:"role-icon"},w={class:"content"},I={key:0,class:"chat-input"},L={key:2,class:"completion-alert"};var F={__name:"QuestionDetailView",setup(e){const a=(0,u.KR)([]),t=(0,u.KR)(!1),F=(0,u.KR)([]),R=(0,u.KR)(!1),C=(0,u.KR)(""),x=(0,u.KR)(!1),K=(0,r.lq)(),V=(0,u.KR)(""),q=(0,u.KR)(""),A=(0,u.KR)(null),S=(0,u.KR)(!1),E=(0,u.KR)(!1),P=(0,u.Kh)({studentReason:"",answerId:null}),X=e=>{if(e.shiftKey&&"Enter"===e.key)return!0;"Enter"===e.key&&(e.preventDefault(),j())};(0,l.sV)((async()=>{try{const e=Number(K.params.questionId),a=await o.A.get("/student/question/detail",{params:{questionId:e}});V.value=a.data.data.questionContent,q.value=a.data.data.answerContent,A.value=a.data.data.answerId,console.log("èŽ·å–åˆ°å›žç­”ID:",A.value)}catch(e){console.error("èŽ·å–é—®é¢˜è¯¦æƒ…å¤±è´¥:",e)}}));const N=(0,u.Kh)({score:null,submittedScore:null}),W=async()=>{try{D.value=!0;const e=await o.A.put("/student/studentAnswer",{answerId:A.value,anotherStudentScore:N.score});1===e.data?.code&&(d.nk.success("è¯„åˆ†æäº¤æˆåŠŸ"),N.submittedScore=N.score,N.score=null,R.value=!0,F.value=["chat"])}finally{D.value=!1}},D=(0,u.KR)(!1),U={score:[{required:!0,message:"è¯·è¾“å…¥è¯„åˆ†",trigger:"blur"},{type:"number",min:1,max:100,message:"è¯„åˆ†èŒƒå›´1-100",trigger:["blur","change"]}]},Q={studentReason:[{required:!0,message:"å¿…é¡»è¾“å…¥å›žç­”ç†ç”±",trigger:"blur"},{min:1,message:"ç†ç”±ä¸å¯ä»¥ä¸ºç©º",trigger:"blur"}]},T=(0,m.Pj)(),j=async()=>{try{if(!C.value.trim())return;x.value=!0,a.value.push({role:"user",content:C.value});const e=await o.A.post("/student/someoneAsk/chat/improveAnswer",{prompt:C.value,userId:Number(localStorage.getItem("student-id")),courseId:T.getters["chapter/getCurrentChapterParams"].courseId,chapterId:T.getters["chapter/getCurrentChapterParams"].chapterId,questionId:Number(K.params.questionId),question:V.value},{timeout:3e5});1===e.data?.code?(a.value.push({role:"assistant",content:e.data.data.response}),e.data.data.flag&&(P.answerId=e.data.data.id,S.value=!0,await o.A.put("/student/question/updateIfSelect",null,{params:{questionId:Number(K.params.questionId)}}),E.value=!0,await(0,i.X)({userId:Number(localStorage.getItem("student-id")),courseId:T.getters["chapter/getCurrentChapterParams"].courseId,chapterId:T.getters["chapter/getCurrentChapterParams"].chapterId,step:3}),d.nk.success("è¿›åº¦å·²æ›´æ–°")),C.value=""):c.s.confirm("å¤§æ¨¡åž‹æœåŠ¡è¿žæŽ¥å¼‚å¸¸ï¼Œé”™è¯¯ä¿¡æ¯: "+(e.data?.message||"æœªçŸ¥é”™è¯¯")+"ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•","æœåŠ¡ä¸å¯ç”¨",{confirmButtonText:"ç«‹å³åˆ·æ–°",cancelButtonText:"å–æ¶ˆ",type:"error"}).then((()=>{location.reload()}))}catch(e){d.nk.error("è¯·æ±‚å¤±è´¥: "+e.message)}finally{x.value=!1}},z=async()=>{try{const e=await o.A.put("/student/studentImproveAnswer/reason",{answerId:P.answerId,studentReason:P.studentReason});1===e.data?.code&&(d.nk.success("ç†ç”±æäº¤æˆåŠŸ"),S.value=!1,E.value=!0)}catch(e){d.nk.error("æäº¤å¤±è´¥: "+e.message)}};return(e,u)=>{const r=(0,l.g2)("el-button"),o=(0,l.g2)("el-alert"),d=(0,l.g2)("el-descriptions-item"),c=(0,l.g2)("el-descriptions"),i=(0,l.g2)("el-dialog"),m=(0,l.g2)("el-input-number"),K=(0,l.g2)("el-form-item"),A=(0,l.g2)("el-form"),T=(0,l.g2)("el-input"),B=(0,l.g2)("el-collapse-item"),O=(0,l.g2)("el-collapse"),$=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(r,{type:"primary",onClick:u[0]||(u[0]=e=>t.value=!0),class:"mb-4"},{default:(0,l.k6)((()=>u[7]||(u[7]=[(0,l.eW)(" ðŸ“ è¯„åˆ†æ ‡å‡† ")]))),_:1}),(0,l.bF)(i,{modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=e=>t.value=e),title:"è¯„åˆ†æ ‡å‡†",width:"720px"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",b,[(0,l.bF)(o,{title:"å…ˆåˆ¤æ–­å›žç­”ç›¸å…³æ€§ï¼Œå†æ ¹æ®ä»¥ä¸‹æ ‡å‡†è¯„åˆ†",type:"info",closable:!1,class:"mb-4"}),(0,l.bF)(c,{border:"",column:1,title:"è¯„åˆ†ç»†åˆ™"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"80-100åˆ† | å®Œç¾Žå›žç­”"},{default:(0,l.k6)((()=>u[8]||(u[8]=[(0,l.Lk)("span",{class:"text-emerald-600 font-medium"},"âœ… å®Œå…¨å‡†ç¡®ã€å®Œæ•´ã€é€»è¾‘ä¸¥å¯†",-1),(0,l.Lk)("pre",{class:"example"},'ç¤ºä¾‹ï¼š\n          é—®é¢˜ï¼šä»€ä¹ˆæ˜¯å…‰åˆä½œç”¨\n          å›žç­”ï¼š"å…‰åˆä½œç”¨åˆ†ä¸ºå…‰ååº”å’Œæš—ååº”ï¼š\n          1. å…‰ååº”ä¸­å¶ç»¿ä½“å¸æ”¶å…‰èƒ½åˆ†è§£æ°´\n          2. é‡Šæ”¾æ°§æ°”å¹¶ç”ŸæˆATPå’ŒNADPH\n          3. æš—ååº”é€šè¿‡å¡å°”æ–‡å¾ªçŽ¯å›ºå®šCOâ‚‚ç”Ÿæˆè‘¡è„ç³–"',-1)]))),_:1}),(0,l.bF)(d,{label:"60-80åˆ† | ä¼˜ç§€å›žç­”"},{default:(0,l.k6)((()=>u[9]||(u[9]=[(0,l.Lk)("span",{class:"text-blue-600 font-medium"},"âœï¸ æ­£ç¡®ä½†ç®€ç•¥ï¼Œé€»è¾‘æ¸…æ™°",-1),(0,l.Lk)("pre",{class:"example"},'ç¤ºä¾‹ï¼š\n          å›žç­”ï¼š"å…‰åˆä½œç”¨æ˜¯æ¤ç‰©åˆ©ç”¨å…‰èƒ½å°†COâ‚‚å’Œæ°´\n          è½¬åŒ–ä¸ºè‘¡è„ç³–çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºå…‰ååº”å’Œæš—ååº”"',-1)]))),_:1}),(0,l.bF)(d,{label:"40-60åˆ† | åŸºæœ¬æ­£ç¡®"},{default:(0,l.k6)((()=>u[10]||(u[10]=[(0,l.Lk)("span",{class:"text-orange-600 font-medium"},"âš ï¸ å­˜åœ¨å°é”™è¯¯/ä¿¡æ¯ä¸å®Œæ•´",-1),(0,l.Lk)("pre",{class:"example"},'ç¤ºä¾‹ï¼š\n          å›žç­”ï¼š"å…‰åˆä½œç”¨æ˜¯æ¤ç‰©åˆ¶é€ é£Ÿç‰©çš„è¿‡ç¨‹\n          éœ€è¦é˜³å…‰ã€æ°´å’ŒäºŒæ°§åŒ–ç¢³ï¼Œäº§ç”Ÿæ°§æ°”"',-1)]))),_:1}),(0,l.bF)(d,{label:"20-40åˆ† | éƒ¨åˆ†é”™è¯¯"},{default:(0,l.k6)((()=>u[11]||(u[11]=[(0,l.Lk)("span",{class:"text-rose-600 font-medium"},"âŒ æ˜Žæ˜¾é”™è¯¯/åç¦»ä¸»é¢˜",-1),(0,l.Lk)("pre",{class:"example"},'ç¤ºä¾‹ï¼š\n          å›žç­”ï¼š"å…‰åˆä½œç”¨å°±æ˜¯æ¤ç‰©å¸æ”¶é˜³å…‰\n          ç„¶åŽäº§ç”Ÿèƒ½é‡ä¾›è‡ªå·±ä½¿ç”¨"',-1)]))),_:1}),(0,l.bF)(d,{label:"1-20åˆ† | å®Œå…¨é”™è¯¯"},{default:(0,l.k6)((()=>u[12]||(u[12]=[(0,l.Lk)("span",{class:"text-red-700 font-medium"},"â›” æ— å…³/æ— æ³•ç†è§£",-1),(0,l.Lk)("pre",{class:"example"},'ç¤ºä¾‹ï¼š\n          å›žç­”ï¼š"å…‰åˆä½œç”¨æ˜¯åŠ¨ç‰©æ¶ˆåŒ–é£Ÿç‰©çš„æ–¹å¼"',-1)]))),_:1})])),_:1})])])),_:1},8,["modelValue"]),(0,l.bF)($,{class:"dialog-container"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",k,[u[14]||(u[14]=(0,l.Lk)("div",{class:"avatar"},"ðŸ‘¤",-1)),(0,l.Lk)("div",v,[u[13]||(u[13]=(0,l.Lk)("h3",null,"å­¦ç”Ÿæé—®",-1)),(0,l.Lk)("p",null,(0,s.v_)(V.value),1)])]),(0,l.Lk)("div",g,[u[21]||(u[21]=(0,l.Lk)("div",{class:"avatar"},"ðŸ“",-1)),(0,l.Lk)("div",h,[u[20]||(u[20]=(0,l.Lk)("h3",null,"å­¦ç”Ÿç­”æ¡ˆ",-1)),(0,l.Lk)("pre",null,(0,s.v_)(q.value),1),(0,l.bF)(A,{model:N,rules:U,onSubmit:(0,n.D$)(W,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(K,{label:"è¯·è¾“å…¥è¯„åˆ†ï¼ˆ1-100ï¼‰",prop:"score"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:N.score,"onUpdate:modelValue":u[2]||(u[2]=e=>N.score=e),min:1,max:100,placeholder:N.submittedScore?"å·²æäº¤è¯„åˆ†ï¼š"+N.submittedScore:"è¯·è¾“å…¥è¯„åˆ†","controls-position":"right"},null,8,["modelValue","placeholder"])])),_:1}),(0,l.bF)(r,{type:"primary","native-type":"submit",loading:D.value},{default:(0,l.k6)((()=>u[15]||(u[15]=[(0,l.eW)(" æäº¤è¯„åˆ† ")]))),_:1},8,["loading"])])),_:1},8,["model"]),(0,l.bF)(O,{modelValue:F.value,"onUpdate:modelValue":u[6]||(u[6]=e=>F.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(B,{name:"chat",disabled:!R.value},{title:(0,l.k6)((()=>u[16]||(u[16]=[(0,l.Lk)("span",{class:"chat-title"},"ðŸ’¬ æ”¹è¿›è¯¥å­¦ç”Ÿçš„ç­”æ¡ˆ",-1)]))),default:(0,l.k6)((()=>[(0,l.Lk)("div",f,[(0,l.Lk)("div",y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:(0,s.C4)(["message",e.role])},[(0,l.Lk)("div",_,(0,s.v_)("user"===e.role?"ðŸ‘¤":"ðŸ¤–"),1),(0,l.Lk)("div",w,(0,s.v_)(e.content),1)],2)))),128))]),E.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",I,[(0,l.bF)(T,{modelValue:C.value,"onUpdate:modelValue":u[3]||(u[3]=e=>C.value=e),placeholder:"è¾“å…¥æ‚¨çš„å›žç­”...",clearable:"",type:"textarea",rows:3,autosize:{minRows:3,maxRows:6},onKeyup:(0,n.jR)(X,["enter"])},null,8,["modelValue"]),(0,l.bF)(r,{type:"primary",onClick:j,loading:x.value,style:{"margin-top":"10px"}},{default:(0,l.k6)((()=>u[17]||(u[17]=[(0,l.eW)(" å‘é€ ")]))),_:1},8,["loading"])])),S.value?((0,l.uX)(),(0,l.Wv)(o,{key:1,title:"è¯·è¯´æ˜Žå›žç­”ç†ç”±",type:"warning",closable:!1,class:"mb-4"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{model:P,rules:Q},{default:(0,l.k6)((()=>[(0,l.bF)(K,{label:"å›žç­”ç†ç”±",prop:"studentReason",class:"reason-input"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{modelValue:P.studentReason,"onUpdate:modelValue":u[4]||(u[4]=e=>P.studentReason=e),type:"textarea",rows:4,autosize:{minRows:4,maxRows:8},placeholder:"è¯·è¯¦ç»†è¯´æ˜Žæ‚¨ç»™å‡ºæ­¤å›žç­”çš„ç†ç”±",style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{type:"primary",onClick:z,disabled:!P.studentReason.trim()},{default:(0,l.k6)((()=>u[18]||(u[18]=[(0,l.eW)(" æäº¤ç†ç”± ")]))),_:1},8,["disabled"])])),_:1},8,["model"])])),_:1})):(0,l.Q3)("",!0),E.value?((0,l.uX)(),(0,l.CE)("div",L,[(0,l.bF)(o,{title:"ðŸŽ‰ ä»»åŠ¡å®Œæˆ",type:"success",description:"æ­å–œæ‚¨å®Œæˆæœ¬ç« èŠ‚çš„ä»–é—®ä½ ç­”ï¼å¯è¿”å›žè¯¾ç¨‹åˆ—è¡¨ç»§ç»­å­¦ä¹ å…¶ä»–ç« èŠ‚ã€‚",closable:!1},{extra:(0,l.k6)((()=>[(0,l.bF)(r,{type:"primary",onClick:u[5]||(u[5]=a=>e.$router.push({name:"courses"})),class:"back-btn"},{default:(0,l.k6)((()=>u[19]||(u[19]=[(0,l.eW)(" è¿”å›žè¯¾ç¨‹åˆ—è¡¨ ")]))),_:1})])),_:1})])):(0,l.Q3)("",!0)])])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])])])),_:1})])}}},R=t(1241);const C=(0,R.A)(F,[["__scopeId","data-v-2bca4155"]]);var x=C}}]);
//# sourceMappingURL=865.2c7e4116.js.map