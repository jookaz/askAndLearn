{"version":3,"file":"js/740.f193ed17.js","mappings":"kTA+BA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,GAAWC,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,MAAQ,WAEnCC,GAAOH,EAAAA,EAAAA,IAAI,CACfI,SAAU,GACVC,OAAQ,GACRC,SAAU,KAWNC,EAAmBA,CAACC,EAAMC,EAAOC,KAChC,0BAA0BC,KAAKF,GAGlCC,IAFAA,EAAS,IAAIE,MAAM,kBAGrB,EAGIC,EAAQ,CACZT,SAAU,CAAC,CAAEU,UAAU,EAAMC,QAAS,SAAUC,QAAS,SACzDX,OAAQ,CACN,CAAES,UAAU,EAAMC,QAAS,QAASC,QAAS,SAG/CV,SAAU,CACR,CAAEQ,UAAU,EAAMC,QAAS,QAASC,QAAS,QAC7C,CAAEC,UAAWV,EAAkBS,QAAS,UAItCE,EAAaC,UACjB,IACE,IAAIC,EAEFA,EADqB,YAAnBrB,EAASU,YACCY,EAAAA,EAAAA,IAAgB,CAC1BjB,SAAUD,EAAKM,MAAML,SACrBkB,cAAenB,EAAKM,MAAMJ,OAC1BC,SAAUH,EAAKM,MAAMH,iBAGXiB,EAAAA,EAAAA,IAAgB,CAC1BnB,SAAUD,EAAKM,MAAML,SACrBoB,aAAcrB,EAAKM,MAAMJ,OACzBC,SAAUH,EAAKM,MAAMH,WAKH,IAAlBc,EAAIK,KAAKC,MACXC,EAAAA,GAAUC,QAAQ,QAClB/B,EAAOgC,KAAK,WAEZF,EAAAA,GAAUG,MAAMV,EAAIK,KAAKM,KAAO,OAGpC,CAAE,MAAOD,GACPE,QAAQF,MAAM,UAAWA,GACzBH,EAAAA,GAAUG,MAAMA,EAAMG,UAAUR,MAAMM,KAAO,aAC/C,G,+rCC5FF,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://teacher-ai/./src/views/RegisterView.vue","webpack://teacher-ai/./src/views/RegisterView.vue?1ec6"],"sourcesContent":["<template>\r\n  <div class=\"register-container\">\r\n    <el-card class=\"register-card\">\r\n      <h2>{{ userType === 'student' ? '学生注册' : '教师注册' }}</h2>\r\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\">\r\n        <el-form-item label=\"用户名\" prop=\"userName\">\r\n          <el-input v-model=\"form.userName\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item :label=\"userType === 'student' ? '学号' : '工号'\" prop=\"number\">\r\n          <el-input v-model=\"form.number\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"form.password\" type=\"password\" show-password />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm\">立即注册</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { studentRegister, teacherRegister } from '@/api/auth'  // 新增teacherRegister导入\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n// 移除未使用的router声明\r\nconst userType = ref(route.query.type || 'student')\r\n\r\nconst form = ref({\r\n  userName: '',\r\n  number: '',\r\n  password: ''\r\n})\r\n\r\n// const validateNumber = (rule, value, callback) => {\r\n//   if (!/^\\d{6}$/.test(value)) {\r\n//     callback(new Error('必须为6位数字'))\r\n//   } else {\r\n//     callback()\r\n//   }\r\n// }\r\n\r\nconst validatePassword = (rule, value, callback) => {\r\n  if (!/^(?=.*[A-Za-z]).{6,15}$/.test(value)) {\r\n    callback(new Error('6-15位且至少包含一个字母'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nconst rules = {\r\n  userName: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n  number: [\r\n    { required: true, message: '请输入编号', trigger: 'blur' },\r\n    // { validator: validateNumber, trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, message: '请输入密码', trigger: 'blur' },\r\n    { validator: validatePassword, trigger: 'blur' }\r\n  ]\r\n}\r\n// 移除未使用的onMounted导入\r\nconst submitForm = async () => {\r\n  try {\r\n    let res\r\n    if (userType.value === 'student') {\r\n      res = await studentRegister({\r\n        userName: form.value.userName,\r\n        studentNumber: form.value.number,\r\n        password: form.value.password\r\n      })\r\n    } else {\r\n      res = await teacherRegister({\r\n        userName: form.value.userName,\r\n        workerNumber: form.value.number,\r\n        password: form.value.password\r\n      })\r\n    }\r\n    \r\n    // 修改部分开始\r\n    if (res.data.code === 1) {\r\n      ElMessage.success('注册成功')\r\n      router.push('/login')\r\n    } else {\r\n      ElMessage.error(res.data.msg || '注册失败') // 使用后端返回的msg\r\n    }\r\n    // 修改部分结束\r\n  } catch (error) {\r\n    console.error('注册请求失败:', error)\r\n    ElMessage.error(error.response?.data?.msg || '请求异常，请稍后重试') // 捕获异常中的msg\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n.register-card {\r\n  width: 500px;\r\n  padding: 20px;\r\n}\r\n</style>","import script from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RegisterView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=27f63bc8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-27f63bc8\"]])\n\nexport default __exports__"],"names":["route","useRoute","router","useRouter","userType","ref","query","type","form","userName","number","password","validatePassword","rule","value","callback","test","Error","rules","required","message","trigger","validator","submitForm","async","res","studentRegister","studentNumber","teacherRegister","workerNumber","data","code","ElMessage","success","push","error","msg","console","response","__exports__"],"sourceRoot":""}