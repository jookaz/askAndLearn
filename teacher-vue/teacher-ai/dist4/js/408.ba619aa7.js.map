{"version":3,"file":"js/408.ba619aa7.js","mappings":"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","sources":["webpack://teacher-ai/./src/views/CollaborativeImprovement.vue","webpack://teacher-ai/./src/views/CollaborativeImprovement.vue?c2ef","webpack://teacher-ai/./src/api/askyou.js","webpack://teacher-ai/./src/components/CustomThumbIcon.vue","webpack://teacher-ai/./src/components/CustomThumbIcon.vue?a441"],"sourcesContent":["<template>\r\n  <div class=\"improve-container\">\r\n    <!-- Êñ∞Â¢ûÁ©∫Áä∂ÊÄÅÊèêÁ§∫ -->\r\n    <el-card v-if=\"questions.length === 0\" class=\"empty-card\">\r\n      <h3 style=\"color: #909399\">üì≠ ÂΩìÂâçÁ´†ËäÇÊöÇÊó†ÈóÆÈ¢ò</h3>\r\n      <div class=\"empty-content\">\r\n        <p>ÂΩìÂâçÁ´†ËäÇËøòÊ≤°ÊúâÂ≠¶ÁîüÊèêÂá∫ÈóÆÈ¢òÔºåÊÇ®ÂèØ‰ª•ÈÄâÊã©Ôºö</p>\r\n        <el-button \r\n          type=\"primary\"\r\n          @click=\"backToChapter\"\r\n          class=\"back-btn\"\r\n        >\r\n          ËøîÂõûÁ´†ËäÇÂàóË°®\r\n        </el-button>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- ÂéüÊúâÈóÆÈ¢òÂàóË°® -->\r\n    <el-card \r\n      v-for=\"q in questions\" \r\n      :key=\"q.id\"\r\n      class=\"question-card\"\r\n      @click=\"$router.push({ \r\n        name: 'QuestionWithAllAnswer',\r\n        params: { questionId: q.id }\r\n      })\"\r\n    >\r\n      <div class=\"question-box\">\r\n        <strong class=\"question-content\">{{ q.questionContent }}</strong>\r\n        <div class=\"student-info\">\r\n          <span>{{ q.studentName }}</span>\r\n          <span style=\"margin:0 10px\">|</span>\r\n          <span>{{ q.classes }}</span>\r\n        </div>\r\n        <div class=\"action-bar\">\r\n          <el-button @click.stop=\"toggleLike(q)\">\r\n            <el-icon :class=\"{ 'liked': q.isLiked }\">\r\n              <CustomThumbIcon v-if=\"!q.isLiked\" />\r\n              <CustomThumbIcon v-else color=\"#409eff\" />\r\n            </el-icon>\r\n            <span class=\"count\">{{ q.likes }}</span>\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n      <el-divider />\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Êñ∞Â¢ûÂØºÂÖ•\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { ref, onMounted } from 'vue'\r\nimport { listAllQuestions, updateQuestionLike } from '@/api/askyou'\r\nimport CustomThumbIcon from '@/components/CustomThumbIcon.vue'\r\nconst questions = ref([])\r\nconst router = useRouter()\r\nconst store = useStore()\r\n\r\n// Êñ∞Â¢ûËøîÂõûÁ´†ËäÇÊñπÊ≥ïÔºàÂèÇËÄÉCompletionPage.vueÔºâ\r\nconst backToChapter = () => {\r\n  if (window.parent.forceRefreshProgress) {\r\n    window.parent.forceRefreshProgress();\r\n  }\r\n  router.push({\r\n    name: 'chapters',\r\n    params: {\r\n      courseId: store.getters['chapter/getCurrentChapterParams'].courseId\r\n    }\r\n  });\r\n}\r\nonMounted(async () => {\r\n  try {\r\n    const { courseId, chapterId } = store.getters['chapter/getCurrentChapterParams']\r\n    const res = await listAllQuestions({ \r\n      courseId,\r\n      chapterId\r\n    })\r\n    questions.value = res.data.data.map(q => ({\r\n      ...q,\r\n      likes: q.likeNumber, // ‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑÁÇπËµûÊï∞\r\n      isLiked: false\r\n    }))\r\n  } catch (error) {\r\n    console.error('Ëé∑ÂèñÈóÆÈ¢òÂàóË°®Â§±Ë¥•:', error)\r\n  }\r\n})\r\n\r\nconst toggleLike = async (item) => {\r\n  const originalState = item.isLiked  // Â∞ÜÂ£∞ÊòéÁßªËá≥ÂáΩÊï∞‰ΩúÁî®ÂüüÈ°∂ÈÉ®\r\n  try {\r\n    // Á´ãÂç≥Êõ¥Êñ∞UIÁä∂ÊÄÅ\r\n    item.isLiked = !originalState\r\n    item.likes = item.isLiked ? item.likes + 1 : item.likes - 1\r\n    \r\n    // Ë∞ÉÁî®ÂêéÁ´ØÊé•Âè£\r\n    await updateQuestionLike(item.id, item.isLiked)\r\n  } catch (error) {\r\n    // Âá∫ÈîôÊó∂ÂõûÊªöÁä∂ÊÄÅ\r\n    item.isLiked = originalState\r\n    item.likes = originalState ? item.likes + 1 : item.likes - 1\r\n    console.error('ÁÇπËµûÊìç‰ΩúÂ§±Ë¥•:', error)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.student-info {\r\n  color: #909399;\r\n  font-size: 14px;\r\n  margin-bottom: 10px;\r\n}\r\n.empty-card {\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n}\r\n\r\n.empty-content {\r\n  margin: 20px 0;\r\n}\r\n\r\n.back-btn {\r\n  margin-top: 15px;\r\n}\r\n\r\n.question-card {\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\r\n}\r\n\r\n.question-content {\r\n  font-size: 16px;\r\n  line-height: 1.6;\r\n  display: block;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.action-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.el-divider {\r\n  margin: 15px 0;\r\n  background-color: #ebeef5;\r\n}\r\n</style>","import script from \"./CollaborativeImprovement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollaborativeImprovement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CollaborativeImprovement.vue?vue&type=style&index=0&id=74853fba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-74853fba\"]])\n\nexport default __exports__","import request from '@/utils/request'\r\n\r\nexport const getAvailableModels = (courseId) => {\r\n  return request({\r\n    url: `/student/youAsk/models/${courseId}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const multiModelChat = (modelNames, question, userId, courseId, chapterId, questionId) => {\r\n  return request({\r\n    url: '/student/youAsk/chat/multi',\r\n    method: 'post',\r\n    data: {\r\n      modelNames,\r\n      question,\r\n      userId,\r\n      courseId, \r\n      chapterId,\r\n      questionId // Ê∑ªÂä†questionIdÂèÇÊï∞\r\n    },\r\n    timeout: 60000\r\n  })\r\n}\r\n\r\nexport const streamMultiModelChat = (modelNames, prompt) => {\r\n  return request({\r\n    url: '/student/youAsk/chat/multi',\r\n    method: 'post',\r\n    data: { modelNames, prompt },\r\n    responseType: 'text',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Accept': 'text/event-stream'\r\n    }\r\n  })\r\n};\r\n\r\nexport const postChat = (data, config) => {\r\n  return request({\r\n    url: '/student/youAsk/chat',\r\n    method: 'post',\r\n    data,\r\n    ...config  // ÂêàÂπ∂È¢ùÂ§ñÈÖçÁΩÆ\r\n  })\r\n}\r\n\r\nexport const chatAnswer = (params) => {\r\n  return request({\r\n    url: '/student/youAsk/chat/answer',\r\n    method: 'post',\r\n    timeout: 60000,\r\n    data: params\r\n  })\r\n}\r\n\r\nexport const updateModelScore = (id, score) => {\r\n  return request({\r\n    url: '/student/modelsAnswer/score',\r\n    method: 'put',\r\n    data: {\r\n      id,\r\n      studentScore: score\r\n    }\r\n  })\r\n}\r\n\r\n// Ê∑ªÂä†‰ª•‰∏ãÊé•Âè£ÂÆö‰πâ\r\nexport const getChatIds = () => {\r\n  return request({\r\n    url: '/ai/history',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getChatHistory = (chatId) => {\r\n  return request({\r\n    url: `/ai/history/${chatId}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const listAllQuestions = (params) => {\r\n  return request({\r\n    url: '/student/question/listAll',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function updateQuestionLike(questionId, isLike) {\r\n  return request({\r\n    url: '/student/question/updateLike',\r\n    method: 'put',\r\n    params: { questionId, isLike }\r\n  })\r\n}\r\n\r\nexport function getQuestionAllAnswers(questionId) {\r\n  return request({\r\n    url: '/student/question/allAnswer',\r\n    method: 'get',\r\n    params: { questionId }\r\n  })\r\n}\r\n\r\nexport const updateStudentAnswerLike = (answerId, isLike) => {\r\n  return request({\r\n    url: 'student/studentAnswer/updateLike',\r\n    method: 'put',\r\n    params: { answerId, isLike }\r\n  })\r\n}\r\n\r\nexport const updateStudentImproveAnswerLike = (improveAnswerId, isLike) => {\r\n  return request({\r\n    url: 'student/studentImproveAnswer/updateLike',\r\n    method: 'put',\r\n    params: { improveAnswerId, isLike }\r\n  })\r\n}\r\n\r\nexport const updateStudentAnswerAllLike = (studentAnswerAllId, isLike) => {\r\n  return request({\r\n    url: 'student/studentAnswerAll/updateLike',\r\n    method: 'put',\r\n    params: { studentAnswerAllId, isLike }\r\n  })\r\n}\r\n\r\nexport const createStudentAnswerAll = (data) => {\r\n  return request({\r\n    url: 'student/studentAnswerAll/create',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport const updateStudentReason = (data) => {\r\n  return request({\r\n    url: '/student/modelsAnswer/reason',\r\n    method: 'put',\r\n    data\r\n  })\r\n}","<template>\r\n  <svg viewBox=\"0 0 1024 1024\" width=\"1em\" height=\"1em\">\r\n    <path d=\"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4-20.5-21.5-48.1-33.4-77.9-33.4-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-0.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81z m636.4-353l-21.9 19 13.9 25.4c4.6 8.4 6.9 17.6 6.9 27.3 0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4c4.6 8.4 6.9 17.6 6.9 27.3 0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4c4.6 8.4 6.9 17.6 6.9 27.3 0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5c5.2-18.9 22.5-32.2 42.2-32.3 7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z\" :fill=\"color\"/>\r\n  </svg>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    color: {\r\n      type: String,\r\n      default: '#999'\r\n    }\r\n  }\r\n}\r\n</script>","import { render } from \"./CustomThumbIcon.vue?vue&type=template&id=1997c395\"\nimport script from \"./CustomThumbIcon.vue?vue&type=script&lang=js\"\nexport * from \"./CustomThumbIcon.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["questions","ref","router","useRouter","store","useStore","backToChapter","window","parent","forceRefreshProgress","push","name","params","courseId","getters","onMounted","async","chapterId","res","listAllQuestions","value","data","map","q","likes","likeNumber","isLiked","error","console","toggleLike","originalState","item","updateQuestionLike","id","__exports__","getAvailableModels","request","url","method","multiModelChat","modelNames","question","userId","questionId","timeout","postChat","config","chatAnswer","updateModelScore","score","studentScore","getChatIds","getChatHistory","chatId","isLike","getQuestionAllAnswers","updateStudentAnswerLike","answerId","updateStudentImproveAnswerLike","improveAnswerId","updateStudentAnswerAllLike","studentAnswerAllId","createStudentAnswerAll","updateStudentReason","viewBox","width","height","_createElementBlock","_hoisted_1","_createElementVNode","d","fill","$props","color","_hoisted_2","props","type","String","default","render"],"sourceRoot":""}